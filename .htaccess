# ---------------------------------------

# MatriFlow Apache Configuration

# ---------------------------------------

# Disable directory listing

Options -Indexes

# Default entry file

DirectoryIndex index.php

# Prevent access to sensitive files

<FilesMatch "\.(env|ini|log|sql|md|txt)$">
Order allow,deny
Deny from all
</FilesMatch>

# Block access to app, storage, and config if misrouted

RedirectMatch 403 ^/(app|storage|bootstrap\.php)

# Basic security headers (backup in case PHP headers fail)

<IfModule mod_headers.c>
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set Referrer-Policy "no-referrer"
</IfModule>

# Force HTTPS when available (Commented out for local XAMPP development)
# <IfModule mod_rewrite.c>
#     RewriteEngine On
#
#     RewriteCond %{HTTPS} off
#     RewriteCond %{HTTP:X-Forwarded-Proto} !https
#     RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
#
# </IfModule>
